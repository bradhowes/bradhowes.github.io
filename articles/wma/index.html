<!DOCTYPE html><html lang=en-US><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Converting WMA Files to MP3 | Keystroke Countdown</title><meta name=author content="[object Object]"><meta name=robots content="index, follow"><meta name=HandheldFriendly content=True><meta name=description content="Using FFMpeg toolkit to transcode MWA files to MP3 format"><link rel=author href=/humans.txt><link rel=icon type=image/png href=/images/favicon.png><link rel=stylesheet href=/css/all-219136742a6fdee2bdc61d07f9ed89cc.css></head><body class="post-template nav-closed"><div class="nav nav-closed" id=nav><h3 class=nav-title>Menu</h3><a href=# class=nav-close><span class=hidden>Close</span></a><ul class=nav-list><li class=nav-home role=presentation><a href=/ ><i class="fa fa-home" aria-hidden=true></i> Home</a></li><li class=nav-home role=presentation><a href=/about><i class="fa fa-info-circle" aria-hidden=true></i> About Me</a></li><li class=nav-nome role=presentation><a href=/rss.xml><i class="fa fa-rss" aria-hidden=true></i> Subscribe</a> <a href="https://validator.w3.org/feed/check.cgi?url=https%3A//keystrokecountdown.com/rss.xml"><img src=/images/valid-rss-rogers.png alt="[Valid RSS]" title="Validate my RSS feed"></a></li><li class=nav-home role=presentation><a href=/topics><i class="fa fa-tags" aria-hidden=true></i> Topics</a></li><br><li class=nav-home role=presentation><a href=/articles/auv3/index.html>AUv3 Development -- Part 1 of N</a></li><li class=nav-home role=presentation><a href=/articles/knobci/index.html>Swift Snapshot Testing in Github Actions</a></li><li class=nav-home role=presentation><a href=/articles/wma/index.html>Converting WMA Files to MP3</a></li><li class=nav-home role=presentation><a href=/articles/remarkable/index.html>Remarkable Customizations</a></li><li class=nav-home role=presentation><a href=/articles/browsers/index.html>Automatic Browser Selection</a></li><li class=nav-home role=presentation><a href=/articles/genart/index.html>Generative Images with SVG.js</a></li><li class=nav-home role=presentation><a href=/articles/logistic/index.html>Simple Image Classification using Logistic Regression</a></li><li class=nav-home role=presentation><a href=/articles/kerberos/index.html>Using Kerboros on macOS</a></li><li class=nav-home role=presentation><a href=/articles/translate/index.html>Text Language Translation Utility</a></li><li class=nav-home role=presentation><a href=/articles/keymaps/index.html>Remapping Keys on macOS High Sierra</a></li><li class=nav-home role=presentation><a href=/articles/letencrypt/index.html>Fixing Azure Let&#x27;s Encrypt Expired Key</a></li><li class=nav-home role=presentation><a href=/articles/console/index.html>Formatting Console Output</a></li><li class=nav-home role=presentation><a href=/articles/layout/index.html>[DRAFT] Test Page for CSS Settings</a></li><li class=nav-home role=presentation><a href=/articles/docker/index.html>[DRAFT] Playing with .Net Core Apps and Docker on a Mac</a></li><li class=nav-home role=presentation><a href=/articles/autohotkey/index.html>Different (Key)strokes for Different Folks</a></li><li class=nav-home role=presentation><a href=/articles/itunes/index.html>Apple iTunes Library Manipulation with Python</a></li><li class=nav-home role=presentation><a href=/articles/metalsmith2/index.html>Metalsmith Plugins for Server-side KaTeX Processing</a></li><li class=nav-home role=presentation><a href=/articles/poisson/index.html>Arrival Intervals of a Poisson Process</a></li><li class=nav-home role=presentation><a href=/articles/cocoapods/index.html>Framework Bundles in Xcode and CocoaPods</a></li><li class=nav-home role=presentation><a href=/articles/signing/index.html>Signing Embedded Frameworks in an Embedded Framework</a></li><li class=nav-home role=presentation><a href=/articles/vhtc/index.html>Variable Height UITableView Cells in Swift</a></li><li class=nav-home role=presentation><a href=/articles/joystick/index.html>JoyStickView for iOS in Swift</a></li><li class=nav-home role=presentation><a href=/articles/dependencyInjection/index.html>Dependency Injection for iOS in Swift</a></li><li class=nav-home role=presentation><a href=/articles/corePlot/index.html>Working with Core Plot</a></li><li class=nav-home role=presentation><a href=/articles/slidingViews/index.html>Sliding UIViews with Core Animation</a></li><li class=nav-home role=presentation><a href=/articles/swiftCollection/index.html>Adding Binary Search to Swift Collections</a></li><li class=nav-home role=presentation><a href=/articles/metalsmith/index.html>Metalsmith Static Site on Azure</a></li><li class=nav-home role=presentation><a href=/articles/bloom/index.html>Bloom Filters in Python</a></li><li class=nav-home role=presentation><a href="/articles/Testing IPython/testing-ipython.html">Testing IPython</a></li><li class=nav-home role=presentation><a href=/articles/decrypt/index.html>Decrypting Logs in Python</a></li><li class=nav-home role=presentation><a href=/articles/power/index.html>Power of Optimal Algorithm Design</a></li><li class=nav-home role=presentation><a href=/articles/PDMPlayground/index.html>PDM Playground</a></li><li class=nav-home role=presentation><a href=/articles/bscope/index.html>B-Scope Radar Display</a></li><li class=nav-home role=presentation><a href=/articles/ascope/index.html>A-Scope Signal Display</a></li><li class=nav-home role=presentation><a href=/articles/radardisplay/index.html>Radar Display</a></li><li class=nav-home role=presentation><a href=/articles/dfwtraffic/index.html>Visualizing Traffic at DFW Airport</a></li></ul></div><span class=nav-cover></span><div class=site-wrapper><header class="main-header post-head" style="background-image: url(/computer-keyboard-stones-on-grass-background-header.jpg)"><nav class="main-nav overlay clearfix"><a class="menu-button icon-menu" href=#><span class=word>Menu</span></a></nav></header><main class=content role=main><article class=post><header class=post-header><h1 class=post-title><a href=/ >Converting WMA Files to MP3</a></h1><section class=post-meta><time class=post-date datetime="Wed May 20 2020 00:18:02 GMT+0200 (Central European Summer Time)">May 20th, 2020</time> <a class=post-date href=/topics><i class="fa fa-tags" aria-hidden=true></i></a> <a class=post-date href=/topics/audio.html>Audio (3)</a> • <a class=post-date href=/topics/ffmpeg.html>FFmpeg (1)</a> • <a class=post-date href=/topics/mp3.html>MP3 (1)</a> • <a class=post-date href=/topics/wma.html>WMA (1)</a></section></header><section class=post-content><p>During the pandemic lockdown in France, my son’s German teacher has been sending out listening exercises in the WMA format. WMA stands for <em>Windows Media Audio</em> and in our household we don’t have any Windows devices that can natively play this proprietary format. At least they are not encumbered with any digit rights management (DRM) crap. Yet I still had to come up with a means for my son to be able to listen to these files to do his assignments. He does have an iPhone, so ideally he will be able to use it and not my personal laptop while figuring out what Christina is saying in German.</p><p>As one might expect, macOS and iOS do not natively know what to do with a WMA file. My son even went so far as installing GarageBand on his phone to try and play the file as an instrument. I did a quick search and found that the most popular solution was <a href=http://www.mplayerhq.hu/design7/news.html>mplayer</a>. After installing via <a href=https://brew.sh>Homebrew</a>, I was indeed able to play the file using</p><pre class=language-bash><code class=language-bash>% mplayer Christina.mp3
</code></pre><p>But that was not going to do much good for him and his iPhone. But I already had a solution to recording audio from the system output: I fired up the excellent <a href=https://rogueamoeba.com/audiohijack/ >Audio Hijack</a> application, and started an ad-hoc recording session just to record the output of <code>mplayer</code>. A bit heavy-handed to get a conversion, it nonetheless did what I needed to give my son a playable audio file.</p><p>A further search revealed a command-line solution using the excellent <a href=https://ffmpeg.org>FFmpeg</a> toolkit. I already had FFmpeg installed (again via the lovely <a href=https://brew.sh>Homebrew</a> macOS package manager) for another project, so it took little effort to recreate the solution. Here is the Bash/Zsh script I came up with to do the work:</p><pre class=language-bash><code class=language-bash><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">INPUT</span><span class="token operator">=</span><span class="token string">"<span class="token variable">${1}</span>"</span>
<span class="token assign-left variable">OUTPUT</span><span class="token operator">=</span><span class="token string">"<span class="token variable">${INPUT<span class="token operator">%%</span>.wma}</span>.mp3"</span>
<span class="token assign-left variable">BIT_RATE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>ffprobe -v error -show_entries <span class="token assign-left variable">format</span><span class="token operator">=</span>bit_rate -of <span class="token assign-left variable">default</span><span class="token operator">=</span>noprint_wrappers<span class="token operator">=</span><span class="token number">1</span>:nokey<span class="token operator">=</span><span class="token number">1</span> <span class="token string">"<span class="token variable">${INPUT}</span>"</span><span class="token variable">)</span></span>
ffmpeg -i <span class="token string">"<span class="token variable">${INPUT}</span>"</span> -vn -ar <span class="token number">44100</span> -ac <span class="token number">2</span> -ab <span class="token string">"<span class="token variable">${BIT_RATE}</span>"</span> -f mp3 <span class="token string">"<span class="token variable">${OUTPUT}</span>"</span>
</code></pre><p>First, we use <code>ffprobe</code> to identify the bit rate of the WMA file. Then we use the bit rate as an option to the <code>ffmpeg</code> command to convert from WMA to MP3. A WMA input file of <code>foo/bar.wma</code> be converted into an MP3 file named <code>foo/bar.mp3</code>. Short and sweet. The only remaining step is sending the file to my son via SMS or email or Apple’s quite handy <a href=https://en.wikipedia.org/wiki/AirDrop>AirDrop</a>.</p><p><em>Alles ist gut.</em></p></section><footer class=post-footer><figure class=author-image><a class=img href=https://keystrokecountdown.com style=background-image:url(/images/HarrisonsLaugh.png)><span class=hidden>Brad Howes's Picture</span></a></figure><section class=author><h4><a href=https://keystrokecountdown.com>Brad Howes</a></h4><p>Owner <a href=https://apps.apple.com/us/developer/b-ray-software/id430573224>B-Ray Software</a>. Programmer in C++, Swift, Python, Javascript and more. Started out doing punch cards in FORTRAN.</p><div class=author-meta><span class="author-location icon-location">Paris, France</span> <span class="author-link icon-link"><a href=http://linkedin.com/in/bradhowes>http://linkedin.com/in/bradhowes</a></span> <span class="author-link icon-feed"><a href=mailto:bradhowes@mac.com>&nbsp;Email Me</a></span></div></section><section class=share><h4>Share this page</h4><div class=social-icons><a class=icon-twitter href="https://twitter.com/intent/tweet?text=Converting%20WMA%20Files%20to%20MP3&amp;url=https%3A%2Fkeystrokecountdown.com%2Farticles%2Fwma%2Findex.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"><span class=hidden>Twitter</span> </a><a class=icon-feed href="mailto:bradhowes@mac.com?subject=Curiosity&body=https%3A%2Fkeystrokecountdown.com%2Farticles%2Fwma%2Findex.html"><span class=hidden>Email</span></a></div></section></footer></article></main><aside class=read-next><a class=read-next-story style="background-image: url(/images/computer-keyboard-stones-on-grass-background-header.jpg)" href=/articles/remarkable/index.html><section class=post><h2>Remarkable Customizations</h2><div class=post-meta>How I customized Remarkable to get what I wanted</div></section></a><a class="read-next-story prev" style="background-image: url(/articles/knobci/computer-keyboard-stones-on-grass-background-header.jpg)" href=/articles/knobci/index.html><section class=post><h2>Swift Snapshot Testing in Github Actions</h2><div class=post-meta>Short discussion on how I run snapshot tests in Github CI</div></section></a></aside><footer class="site-footer clearfix"><section class=copyright><a href=https://keystrokecountdown.com>Keystroke Countdown</a> &copy; <span id=copyrightYear>2020</span> Brad Howes — <a href=https://github.com/bradhowes/keystrokecountdown>Source</a></section></footer></div><script>(function () {
      var installClickHandlers = function () {
        var navElement = document.getElementById("nav");
    
        // The click handler just toggles classes to do the showing/hiding
        //
        var clickHandler = function(e) {
          document.body.classList.toggle("nav-opened");
          document.body.classList.toggle("nav-closed");
          if (navElement) {
            navElement.classList.toggle("nav-opened");
            navElement.classList.toggle("nav-closed");
          }
        };
    
        // Find elements we wish to tap for click events
        //
        var elements = Array.prototype.slice.call(
          document.querySelectorAll(".menu-button, .nav-cover, .nav-close"));
        if (elements && elements.length > 0) {
          elements.forEach(function (element) {
            element.addEventListener('click', clickHandler);
          });
        }
      };
    
      // When the document is finished loading, install event handlers to show/hide sidebar menu
      //
      window.document.addEventListener("DOMContentLoaded", function (event) {
        installClickHandlers();
    
        // Set the copyright year at the bottom of our pages
        //
        window.document.getElementById("copyrightYear").innerHTML = (new Date()).getFullYear();
      });
    })();</script></body></html>